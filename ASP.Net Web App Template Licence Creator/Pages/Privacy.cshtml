@*
@page "/Licence-Generator"
@model RazorPagesDemo.Pages.Forms.IndexModel
@{
    ViewData["Title"] = "Select least 4 features";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Features</title>

    <style>
        h1 {
            text-align: center;
        }

        #featureForm {
            max-width: 400px;
            margin: 0 auto;
        }

        .feature {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        label {
            font-size: 16px;
            margin-right: 10px;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        select {
            width: 120px;
            height: 30px;
        }

        button {
            font-size: 15px;
            margin-top: 10px;
            width: 70px;
            height: 30px;
            margin-right: 10px;
            c
        }

        #fileInput {
            display: none;
        }

        #fileLabel {
            cursor: pointer;
            color: blue;
            text-decoration: underline;
            margin-top: 10px;
        }

        .feature6-row {
            display: flex;
            flex-direction: column;
        }

        #aiFeature {
            position:sticky
        }

        #softwareVersion {
            position:sticky
        }

        #sendStatus {
            margin-top: 10px;
            color: green;
        }
    </style>
</head>

<body>

    <h1>Features</h1>

    <form id="featureForm">
        <div class="feature">
            <label for="feature1">Feature 1:</label>
            <input type="checkbox" id="feature1" name="feature1">
        </div>

        <div class="feature">
            <label for="feature2">Feature 2:</label>
            <input type="checkbox" id="feature2" name="feature2">
        </div>

        <div class="feature">
            <label for="feature3">Feature 3:</label>
            <input type="checkbox" id="feature3" name="feature3" checked>
        </div>

        <div class="feature">
            <label for="feature4">Feature 4:</label>
            <input type="checkbox" id="feature4" name="feature4" checked>
        </div>

        <div class="feature">
            <label for="feature5">Feature 5:</label>
            <input type="checkbox" id="feature5" name="feature5">
        </div>

        <div class="feature">
            <label for="feature6">Feature 6:</label>
            <input type="checkbox" id="feature6" name="feature6">
        </div>

        <div>
            <label for="aiFeature">AI Feature:</label>
            <select id="aiFeature" name="aiFeature">
                <option value="none">(none)</option>
                <option value="basic">Basic</option>
                <option value="gold">Gold</option>
                <option value="premium">Premium</option>
            </select>
        </div>

        <div class="feature">
            <label for="softwareVersion">Software Version:</label>
            <select id="softwareVersion" name="softwareVersion">
                <option value="7.1.0">7.1.0</option>
                <option value="7.1.6">7.1.6</option>
                <option value="7.1.9" selected>7.1.9</option>
                <option value="7.2.0">7.2.0</option>
                <option value="7.2.5">7.2.5</option>
                <option value="7.2.9">7.2.9</option>
                <option value="7.3.0">7.3.0</option>
            </select>
        </div>

        <label id="fileLabel" for="fileInput">Upload Json</label>
        <input type="file" id="fileInput" accept=".json" onchange="readFile(this)">

        <button type="button" onclick="generateJSON()">Save</button>
        <button type="button" onclick="generateJSONAndSend()">Send</button>
        <!-- Send button added -->
        <div id="sendStatus"></div>
    </form>

    <script>
        function generateJSON() {
            // Formdaki checkbox değerlerini al
            var feature1 = document.getElementById("feature1").checked;
            var feature2 = document.getElementById("feature2").checked;
            var feature3 = document.getElementById("feature3").checked;
            var feature4 = document.getElementById("feature4").checked;
            var feature5 = document.getElementById("feature5").checked;
            var feature6 = document.getElementById("feature6").checked;
            var aiFeature = document.getElementById("aiFeature").value;
            var softwareVersion = document.getElementById("softwareVersion").value;

            // JSON nesnesi oluştur
            var jsonContent = {
                "Feature 1": feature1,
                "Feature 2": feature2,
                "Feature 3": feature3,
                "Feature 4": feature4,
                "Feature 5": feature5,
                "Feature 6": feature6,
                "AI Feature": aiFeature,
                "Software Version": softwareVersion
            };

            // Dosyayı indirmek için bir Blob oluştur
            var blob = new Blob([JSON.stringify(jsonContent, null, 2)], {
                type: "application/json"
            });

            // Dosyayı indirmek için bir bağlantı oluştur
            var a = document.createElement("a");
            a.href = URL.createObjectURL(blob);

            // Dosya adını belirt
            a.download = "features.json";

            // Bağlantıya tıkla
            a.click();
        }

        function generateJSONAndSend() {
            // Formdaki checkbox değerlerini al
            var feature1 = document.getElementById("feature1").checked;
            var feature2 = document.getElementById("feature2").checked;
            var feature3 = document.getElementById("feature3").checked;
            var feature4 = document.getElementById("feature4").checked;
            var feature5 = document.getElementById("feature5").checked;
            var feature6 = document.getElementById("feature6").checked;
            var aiFeature = document.getElementById("aiFeature").value;
            var softwareVersion = document.getElementById("softwareVersion").value;

            // JSON nesnesi oluştur
            var jsonContent = {
                "Feature 1": feature1,
                "Feature 2": feature2,
                "Feature 3": feature3,
                "Feature 4": feature4,
                "Feature 5": feature5,
                "Feature 6": feature6,
                "AI Feature": aiFeature,
                "Software Version": softwareVersion
            };

            // JSON verisini gönder
            sendJSONToCommandPrompt(jsonContent);
        }

        function sendJSONToCommandPrompt(jsonContent) {
            // Hedef URL'yi belirle
            var targetUrl = 'http://localhost:5018/';

            // JSON verilerini POST isteği ile gönder
            fetch(targetUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(jsonContent),
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Command Prompt Cevap:', data);
                    document.getElementById("sendStatus").innerHTML = "Sent!";
                    setTimeout(function () {
                        document.getElementById("sendStatus").innerHTML = "";
                    }, 2000);
                })
                .catch(error => {
                    console.error('Command Prompt Hata:', error);
                });
        }

        function readFile(input) {
            var file = input.files[0];

            if (file) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    var data = JSON.parse(e.target.result);

                    // check the unchecked data
                    updateCheckbox("feature1", data["Feature 1"]);
                    updateCheckbox("feature2", data["Feature 2"]);
                    updateCheckbox("feature3", data["Feature 3"]);
                    updateCheckbox("feature4", data["Feature 4"]);
                    updateCheckbox("feature5", data["Feature 5"]);
                    updateCheckbox("feature6", data["Feature 6"]);
                    updateDropdown("aiFeature", data["AI Feature"]);
                    updateDropdown("softwareVersion", data["Software Version"]);
                };

                reader.readAsText(file);
            }
        }

        function updateCheckbox(checkboxId, value) {
            var checkbox = document.getElementById(checkboxId);
            if (checkbox !== null && value !== undefined) {
                checkbox.checked = value;
            }
        }

        function updateDropdown(dropdownId, value) {
            var dropdown = document.getElementById(dropdownId);
            if (dropdown !== null && value !== undefined) {
                dropdown.value = value;
            }
        }
    </script>

</body>

</html>
*@